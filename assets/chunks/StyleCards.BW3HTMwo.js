import{F,p as P,s as I,d as N,r as G,t as O,G as R,x as W}from"./theme.B7B2fq_j.js";/* empty css                 *//* empty css               */import{_ as q}from"./filter.BpPmb1v9.js";import{_ as A,M as D,a as J}from"./MarketToolBar.GMOtmcGg.js";import{d as C}from"./styles.data.DkcmU5x7.js";import{t as k,aa as j,v as r,I as x,J as n,L as t,A as o,O as S,x as c,G as h,B as y,r as $,c as K,a8 as M,u as E,P as H,F as Q,ai as X}from"./framework.DNV5qdj1.js";const Y=["href"],Z={class:"csl-preview"},ee=["innerHTML"],le=["innerHTML"],te=k({__name:"StyleCardWithPop",props:{style:{}},setup(g){const u=g;return(w,s)=>{const _=F,m=j("client-only");return r(),x(m,null,{default:n(()=>[t(_,{trigger:"hover",width:"90%"},{reference:n(()=>[o("a",{href:u.style.dir},S(u.style.title),9,Y)]),default:n(()=>[o("div",Z,[s[0]||(s[0]=o("h3",null,"引注",-1)),o("div",{innerHTML:u.style.citations},null,8,ee),s[1]||(s[1]=o("h3",null,"参考文献表",-1)),o("div",{innerHTML:u.style.bibliography},null,8,le)])]),_:1})]),_:1})}}}),ae=["href"],se={class:"csl-preview"},oe=["innerHTML"],ne=["innerHTML"],re=k({__name:"StyleCardWithPreview",props:{style:{}},setup(g){const u=g;return(w,s)=>(r(),c(h,null,[o("a",{href:u.style.dir},[o("h2",null,S(u.style.title),1)],8,ae),o("div",se,[s[0]||(s[0]=o("h3",null,"引注",-1)),o("div",{class:"csl-preview-citations",innerHTML:u.style.citations},null,8,oe),s[1]||(s[1]=o("h3",null,"参考文献表",-1)),o("div",{class:"csl-preview-bibliography",innerHTML:u.style.bibliography},null,8,ne)])],64))}}),ue={class:"styles-list vp-doc"},ie={key:0},de={key:1},pe=k({__name:"StyleCards",setup(g){const u=[...new Set(C.flatMap(e=>e.tags))].sort((e,l)=>e.localeCompare(l,"zh")).map(e=>({label:e,value:e})),w=[...new Set(C.flatMap(e=>e.field))].filter(e=>!!e).sort((e,l)=>e.localeCompare(l,"en")).map(e=>({label:e,value:e})),s=P("hash-params",{removeFalsyValues:!0}),_=y(s,"format",""),m=y(s,"field",""),v=y(s,"filter",""),b=y(s,"search",""),T=$(!1),U=y(s,"tags",[]),f=$([]);I(U,f,{transform:{ltr:e=>[e].flat()}});const V=K(()=>{let e=C;if(b.value!==""){const l=b.value.toLowerCase();e=e.filter(p=>{var d;return p.title.toLowerCase().includes(l)||((d=p.summary)==null?void 0:d.toLowerCase().includes(l))})}return _.value!==""&&(e=e.filter(l=>l.citation_format===_.value)),m.value!==""&&(e=e.filter(l=>l.field===m.value)),v.value!==""&&(e=e.filter(l=>v.value==="export"?l.title.includes("export")||l.title.includes("导出"):v.value==="thesis"?l.title.includes("学位论文")||l.title.includes("大学"):!0)),f.value.length!==0&&(e=e.filter(l=>f.value.every(p=>{var d;return(d=l.tags)==null?void 0:d.includes(p)}))),e});return(e,l)=>{const p=q,d=N,i=G,L=O,z=R,B=W;return r(),c(h,null,[t(D,null,{default:n(()=>[t(L,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=a=>_.value=a),placeholder:"引文格式",size:"large"},{prefix:n(()=>[t(d,null,{default:n(()=>[t(p)]),_:1})]),default:n(()=>[t(i,{label:"所有",value:""}),t(i,{label:"著者",value:"author"}),t(i,{label:"著者—出版年",value:"author-date"}),t(i,{label:"顺序编码",value:"numeric"}),t(i,{label:"脚注",value:"note"}),t(i,{label:"标签",value:"label"})]),_:1},8,["modelValue"]),t(L,{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=a=>m.value=a),placeholder:"学科分类",size:"large"},{prefix:n(()=>[t(d,null,{default:n(()=>[t(p)]),_:1})]),default:n(()=>[t(i,{label:"所有",value:""}),(r(!0),c(h,null,M(E(w),a=>(r(),x(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(L,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value=a),placeholder:"筛选",size:"large"},{prefix:n(()=>[t(d,null,{default:n(()=>[t(p)]),_:1})]),default:n(()=>[t(i,{label:"所有",value:""}),t(i,{label:"学位论文",value:"thesis"}),t(i,{label:"工具",value:"export"})]),_:1},8,["modelValue"]),t(A,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=a=>b.value=a),placeholder:"搜索样式名称..."},null,8,["modelValue"]),t(z,{modelValue:T.value,"onUpdate:modelValue":l[4]||(l[4]=a=>T.value=a),size:"large","inline-prompt":"","active-text":"始终显示预览","inactive-text":"仅在悬浮时显示预览"},null,8,["modelValue"])]),_:1}),t(J,{modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=a=>f.value=a),tags:E(u)},null,8,["modelValue","tags"]),o("div",ue,[o("p",null,"共加载 "+S(V.value.length)+" 条样式。",1),T.value?(r(),c("div",de,[(r(!0),c(h,null,M(V.value,a=>(r(),x(re,{key:a.id,style:H(a)},null,8,["style"]))),128))])):(r(),c("ul",ie,[(r(!0),c(h,null,M(V.value,a=>(r(),c("li",{key:a.id},[t(te,{style:H(a)},null,8,["style"])]))),128))]))]),V.value.length===0?(r(),x(B,{key:0,description:"无匹配项"})):Q("",!0)],64)}}}),ge=X(pe,[["__scopeId","data-v-52e742cb"]]);export{ge as default};
